#!/bin/bash
# mcpcat

while [[ "$#" -gt 0 ]]; do
    case "$1" in
      "init")
        echo '{"jsonrpc":"2.0","id":'$#',"method":"initialize","params":{"protocolVersion":"2024-11-05","capabilities":{},"clientInfo":{"name":"mcpcat","version":"1.0"}}}'
        echo '{"jsonrpc":"2.0","method":"notifications/initialized"}'
        ;;
      "list")
        echo '{"jsonrpc":"2.0","id":'$#',"method":"tools/list","params":{}}'
        ;;
      "call")
        echo '{"jsonrpc":"2.0","id":'$#',"method":"tools/call","params":{"name":"'$2'","arguments":'$3'}}'
        shift; shift
        ;;
      *)
        echo "Usage: mcp-emit [init|list|call]"
        exit 1
        ;;
    esac
    shift
done
